# CANONSTRATA

## SYSTEM IDENTITY

CanonStrata is a constitutional, load-bearing architectural substrate for websites.

**CanonStrata is NOT:**
- A stack
- A framework
- A toolkit
- A starter, theme, or library

**CanonStrata IS:**
- A permanent foundation that outlives vendors
- A self-defending system that refuses invalid code
- A structural operating system for infinite future architectures

---

## NON-NEGOTIABLE INVARIANTS

### EXISTENCE TEST
The system must hold under all conditions:
1. Analytics disappear → system holds
2. CRM disappear → system holds
3. Cache disappear → system holds
4. Motion disabled → layout holds
5. Tokens missing → build fails
6. Rules broken → compile fails
7. **If and only if all pass → CanonStrata exists**

### REPOSITORY IMMUTABILITY
1. Only source-of-truth code may exist
2. No generated artifacts in repository
3. No backups, temp scripts, reports, or ad-hoc files
4. Artifact drift causes immediate build failure
5. No discretionary retention

### SYSTEM PROHIBITIONS
Violations cause **compile-time failure**:
1. No inline styles
2. No non-token CSS
3. No SaaS coupling
4. No unauthorized motion
5. Client boundary violations → lint error

---

## REFUSAL CONTRACT

CanonStrata enforces invariants through:

### 1. TOKEN GATES
- Missing token → **build fails**
- Hardcoded value → **lint failure**
- Non-token CSS → **rejected**

### 2. MOTION GOVERNANCE
- Only kernel-authorized motion allowed
- Reduced-motion support mandatory
- Motion disabled → layout remains intact
- Unauthorized imports → **build fails**

### 3. TYPE ENFORCEMENT
- Strict TypeScript configuration
- No implicit any
- No unchecked indexed access
- No unused variables
- All violations → **compile failure**

### 4. RUNTIME ASSERTIONS
- Server/client boundary violations → **runtime error**
- Missing configuration → **runtime error**
- Invalid token structure → **runtime error**

---

## ENFORCEMENT MECHANISMS

### AST-Level Prohibitions
```
Inline styles → REJECTED
Unauthorized motion → REJECTED
Hardcoded colors → REJECTED
Client hook in server component → REJECTED
```

### CI as Judiciary
- Validates all invariants before merge
- Zero warnings policy
- Zero exceptions
- Documentation must match system truth

### Build-Time Validation
```bash
npm run validate:tokens    # Token completeness check
npm run validate:motion    # Motion governance check
npm run build             # Full enforcement chain
```

---

## IMMUTABILITY CLAUSE

This system is designed to:
1. Never require refactoring
2. Host infinite future structures without change
3. Operate without human discipline
4. Make ambiguity impossible

**The foundation is locked. No additions. Only perfection.**

---

## ARCHITECTURE GUARANTEES

### Design Tokens = Concrete Raft
All visual properties derive from immutable token system

### Strict TypeScript = Deep Piles
Type system prevents structural failure before runtime

### Server Components Default = Load Distribution
Optimal rendering strategy enforced by architecture

### Adapter Architecture = Future Height Tolerance
System accommodates unknown future requirements without modification

---

## WHAT CANONSTRATA HOSTS

Without modification, CanonStrata supports:
- Contractor websites
- SaaS platforms
- Internal tools
- Public applications

### Core Contractor Capabilities
- Service taxonomy
- Service areas/locations
- Quote/estimate pipelines
- Job classification
- Proof & trust signals
- Lead routing (non-SaaS)
- Image & media governance

### Prohibited (Compile Failure)
- Billing systems
- Subscription management
- SaaS-specific dashboards
- CRM implementations
- Marketing automation

---

## SYSTEM INTROSPECTION

Query the system for explanations:
```bash
npm run explain:violation <file>  # Why code was rejected
npm run explain:invariant <rule>  # Constitutional basis
```

Every refusal cites:
1. Violated invariant
2. Constitutional clause
3. Correction path

---

## FINAL STATE

**This is not a website.**  
**This is a load-bearing megastructure.**

The system is:
- Self-defending
-永久的 (permanent)
- Constitutional
- Complete

No gratitude. No vendors. No maintenance.  
Only **structural law**.
